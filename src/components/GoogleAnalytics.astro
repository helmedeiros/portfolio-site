---
// Google Analytics 4 Component - Production ready
---

{import.meta.env.PROD && (
  <script is:inline>
    // Google Analytics 4 implementation
    const measurementId = 'G-GL0Q1PNV4W';

    // Initialize dataLayer before loading GA script
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}

    // Make gtag globally available immediately
    window.gtag = gtag;

    // Configure with timestamp
    gtag('js', new Date());
    gtag('config', measurementId, {
      cookie_domain: 'heliomedeiros.com',
      cookie_flags: 'SameSite=None;Secure'
    });

    // Load Google Analytics script
    const gaScript = document.createElement('script');
    gaScript.async = true;
    gaScript.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;
    document.head.appendChild(gaScript);

    gaScript.onerror = function() {
      console.error('Failed to load Google Analytics script');
    };
  </script>
)}

{!import.meta.env.PROD && (
  <script is:inline>
    console.log('GoogleAnalytics: Development mode - GA scripts not loaded');
  </script>
)}
